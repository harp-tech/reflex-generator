%YAML 1.1
---
# yaml-language-server: $schema=https://harp-tech.org/draft-02/schema/device.json
device: Tests
whoAmI: 0000
firmwareVersion: "0.1"
hardwareTargets: "1.0"
registers:
  DigitalInputs:
    address: 32
    type: U8
    access: Event
  AnalogData:
    address: 33
    type: Float
    length: 6
    access: Event
    payloadSpec:
      Analog0:
        offset: 0
      Analog1:
        offset: 1
      Analog2:
        offset: 2
      Accelerometer:
        offset: 3
        length: 3
  ComplexConfiguration:
    address: 34
    type: U8
    access: Write
    length: 17
    payloadSpec:
      PwmPort:
        offset: 0
        maskType: PwmPort
      DutyCycle:
        offset: 4
        length: 4
        interfaceType: float
      Frequency:
        offset: 8
        length: 4
        interfaceType: float
      EventsEnabled:
        offset: 12
        interfaceType: bool
      Delta:
        offset: 13
        length: 4
        interfaceType: uint
  Version:
    address: 35
    type: U8
    length: 32
    access: Event
    payloadSpec:
      ProtocolVersion:
        offset: 0
        length: 3
        interfaceType: HarpVersion
      FirmwareVersion:
        offset: 3
        length: 3
        interfaceType: HarpVersion
      HardwareVersion:
        offset: 6
        length: 3
        interfaceType: HarpVersion
      CoreId:
        offset: 9
        length: 3
        interfaceType: string
      InterfaceHash:
        offset: 12
        length: 20
  CustomPayload:
    address: 36
    type: U32
    length: 3
    access: Read
    interfaceType: HarpVersion
    converter: Payload
  CustomRawPayload:
    address: 37
    type: U32
    length: 3
    access: Read
    interfaceType: HarpVersion
    converter: RawPayload
  CustomMemberConverter:
    address: 38
    type: U8
    length: 3
    access: Read
    payloadSpec:
      Header:
        offset: 0
      Data:
        offset: 1
        length: 2
        interfaceType: int
        converter: Payload
  BitmaskSplitter:
    address: 39
    type: U8
    access: Write
    payloadSpec:
      Low:
        mask: 0x0F
        interfaceType: int
        converter: Payload
      High:
        interfaceType: int
        mask: 0xF0
  Counter0:
    address: 40
    type: S32
    access: Event
  PortDIOSet:
    address: 41
    type: U8
    access: Write
    maskType: PortDigitalIOS
  PulseDOPort0: &pulseDO
    address: 42
    type: U16
    access: Write
    minValue: 1
  PulseDO0:
    <<: *pulseDO
    address: 43
groupMasks:
  PwmPort:
    values:
      Pwm0: 0x1
      Pwm1: 0x2
      Pwm2: 0x4
bitMasks:
  PortDigitalIOS:
    bits:
      DIO0: 0x1
      DIO1: 0x2
      DIO2: 0x4
